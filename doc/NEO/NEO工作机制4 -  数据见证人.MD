# NEO中的数据见证人
---
### 见证人的作用
* 检验一个数据是否被篡改过
* 区块链的数据在P2P网络中传播，过程中需要防止有节点篡改数据

### 见证人的工作原理
* 采用公私钥加密的原理，用私钥对原文进行加密，得到的密文可以用公钥解密，解密后的数据应该和原文相同

### NEO中的数据见证人
* 区块数据和交易数据都需要见证人
* 交易数据的见证人
    * 我们知道在发起一个交易时，需要先拼装交易数据，具体来说就是要构造Transaction对象，并填入对应的UTXO数据和脚本数据
    * 为了防止交易数据被篡改，该交易的发起人在拼装交易数据的过程中，会附带上一段可以用来验证交易数据是否被篡改过的数据
    * 这部分数据里包括了用私钥加密后的交易数据，以及可以用来解密的对应公钥，我们把私钥的所有者称为“见证人”
    * 这部分数据被当做一个虚拟机的指令，在验证交易时执行，进行数据验证
    * 如果该交易里有合约脚本，可以在合约脚本里使用`CheckWitness`来检查该交易是否特定账户发起的
    * 每个交易可以有多个“见证人”
* 区块数据的见证人
    * 在共识过程中，议长会先广播签名数据（用私钥加密后的区块头），以及将要出块的所有交易的Hash
    * 议员在收到议长发出的数据包，并且验证了所有将要出块的交易后，也会广播自己的签名数据（用私钥加密后的区块头）
    * 当某个共识节点收到的签名数据达到了通过共识的最小决议数量时，则认为共识通过，开始正式创建区块数据
    * 在创建新的区块数据时，会将收到的这些签名数据和对应公钥作为这个区块的“见证人”
